{{ define "main" }}
<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <div class="title text-center">
          <h2 class="mb-5">{{ .Title | markdownify }}</h2>
        </div>
        
        <div class="content">
          {{ if .Data.Terms }}
            <!-- This is a taxonomy terms page like /categories, /tags -->
            <ul class="list-group list-group-flush">
              {{ range .Data.Terms.ByCount }}
                <li class="list-group-item d-flex justify-content-between align-items-center bg-transparent">
                  <a href="{{ .Page.Permalink }}" class="h5 text-dark">{{ .Page.Title }}</a>
                  <span class="badge badge-primary badge-pill">{{ .Count }}</span>
                </li>
              {{ end }}
            </ul>
          {{ else }}
            <!-- This is a regular list page -->
            <ul class="list-group list-group-flush article-list">
              {{ $paginator := .Paginate .Pages }}
              {{ range $paginator.Pages }}
              <li class="list-group-item bg-transparent border-bottom py-3 px-2">
                <article class="article-preview">
                  <header>
                    <a href="{{ .Permalink }}" class="article-link">
                      <h3 class="font-weight-bold text-primary hover-title mb-1">{{ .Title }}</h3>
                    </a>
                    <time class="text-muted small" datetime="{{ .Date }}">{{ .Date.Format "January 2, 2006" }}</time>
                  </header>
                  <p class="text-muted mt-1 mb-2 small">
                    {{ if .Summary }}
                      {{ truncate 150 .Summary }}
                    {{ else }}
                      {{ truncate 150 .Content }}
                    {{ end }}
                  </p>
                  <div class="d-flex justify-content-between align-items-center mt-2">
                    <div class="article-tags">
                      {{ with .Params.categories }}
                        {{ range . }}
                          <a href="{{ "categories/" | relLangURL }}{{ . | urlize | lower }}/" class="badge badge-primary badge-sm">{{ . }}</a>
                        {{ end }}
                      {{ end }}
                      {{ with .Params.tags }}
                        {{ range . }}
                          <a href="{{ "tags/" | relLangURL }}{{ . | urlize | lower }}/" class="badge badge-secondary badge-sm">{{ . }}</a>
                        {{ end }}
                      {{ end }}
                    </div>
                    <a href="{{ .Permalink }}" class="btn btn-sm btn-outline-primary read-more-btn">
                      <span class="read-more-text">閱讀更多</span> <i class="fas fa-arrow-right ml-1"></i>
                    </a>
                  </div>
                </article>
              </li>
              {{ end }}
            </ul>
            <!-- Pagination -->
            <div class="col-12 mt-5">
              <nav aria-label="Page navigation">
                {{ template "_internal/pagination.html" . }}
              </nav>
            </div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}
