@echo off
chcp 65001
cls
echo ==========================================
echo âš¡ ç¶²ç«™å¿«é€Ÿç™¼å¸ƒç³»çµ± (åªæ›´æ–°å‰å°)
echo ==========================================

:: è¨­å®šè·¯å¾‘
set SOURCE_DIR=C:\Users\user\Documents\GitHub\exampleSite
set DEST_DIR=C:\Users\user\Documents\GitHub\tomisagoodguy.github.io

:: --------------------------------------------
:: æ­¥é©Ÿ 1: ç”¢ç”Ÿéœæ…‹ç¶²ç«™ (Build)
:: --------------------------------------------
echo [1/3] æ­£åœ¨ç·¨è­¯ç¶²ç«™...
cd /d "%SOURCE_DIR%"
call hugo --gc --minify

:: ğŸ›‘ å®‰å…¨ä¿éšªçµ²ï¼šå¦‚æœ Hugo å¤±æ•—ï¼Œç«‹åˆ»åœæ­¢ï¼
if %errorlevel% neq 0 (
    echo.
    echo âŒâŒâŒ ç·¨è­¯å¤±æ•—ï¼è«‹æª¢æŸ¥æ–‡ç« æ ¼å¼ âŒâŒâŒ
    pause
    exit /b
)

:: --------------------------------------------
:: æ­¥é©Ÿ 2: æ¬é‹æª”æ¡ˆ
:: --------------------------------------------
echo [2/3] æ­£åœ¨åŒæ­¥æª”æ¡ˆ...
xcopy "%SOURCE_DIR%\public\*" "%DEST_DIR%\" /s /e /y

:: --------------------------------------------
:: æ­¥é©Ÿ 3: ç™¼å¸ƒç¶²ç«™ (tomisagoodguy.github.io)
:: --------------------------------------------
echo [3/3] æ­£åœ¨å°å¤–ç™¼å¸ƒ...
cd /d "%DEST_DIR%"
git add .
git commit -m "Site Update: %date% %time%"
git push origin HEAD

echo ==========================================
echo âœ… ç¶²ç«™å·²æ›´æ–°ï¼(åŸå§‹ç¢¼è«‹è¨˜å¾—å®šæœŸæ‰‹å‹•å‚™ä»½)
echo ==========================================
pause